/*! typograf | Â© 2019 Denis Seleznev | MIT  License | https://github.com/typograf/typograf */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Typograf=t()}(this,function(){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw s}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=["a","abbr","acronym","b","bdo","big","br","button","cite","code","dfn","em","i","img","input","kbd","label","map","object","q","samp","script","select","small","span","strong","sub","sup","textarea","time","tt","var"],u=[["iexcl",161],["cent",162],["pound",163],["curren",164],["yen",165],["brvbar",166],["sect",167],["uml",168],["copy",169],["ordf",170],["laquo",171],["not",172],["reg",174],["macr",175],["deg",176],["plusmn",177],["sup2",178],["sup3",179],["acute",180],["micro",181],["para",182],["middot",183],["cedil",184],["sup1",185],["ordm",186],["raquo",187],["frac14",188],["frac12",189],["frac34",190],["iquest",191],["Agrave",192],["Aacute",193],["Acirc",194],["Atilde",195],["Auml",196],["Aring",197],["AElig",198],["Ccedil",199],["Egrave",200],["Eacute",201],["Ecirc",202],["Euml",203],["Igrave",204],["Iacute",205],["Icirc",206],["Iuml",207],["ETH",208],["Ntilde",209],["Ograve",210],["Oacute",211],["Ocirc",212],["Otilde",213],["Ouml",214],["times",215],["Oslash",216],["Ugrave",217],["Uacute",218],["Ucirc",219],["Uuml",220],["Yacute",221],["THORN",222],["szlig",223],["agrave",224],["aacute",225],["acirc",226],["atilde",227],["auml",228],["aring",229],["aelig",230],["ccedil",231],["egrave",232],["eacute",233],["ecirc",234],["euml",235],["igrave",236],["iacute",237],["icirc",238],["iuml",239],["eth",240],["ntilde",241],["ograve",242],["oacute",243],["ocirc",244],["otilde",245],["ouml",246],["divide",247],["oslash",248],["ugrave",249],["uacute",250],["ucirc",251],["uuml",252],["yacute",253],["thorn",254],["yuml",255],["fnof",402],["Alpha",913],["Beta",914],["Gamma",915],["Delta",916],["Epsilon",917],["Zeta",918],["Eta",919],["Theta",920],["Iota",921],["Kappa",922],["Lambda",923],["Mu",924],["Nu",925],["Xi",926],["Omicron",927],["Pi",928],["Rho",929],["Sigma",931],["Tau",932],["Upsilon",933],["Phi",934],["Chi",935],["Psi",936],["Omega",937],["alpha",945],["beta",946],["gamma",947],["delta",948],["epsilon",949],["zeta",950],["eta",951],["theta",952],["iota",953],["kappa",954],["lambda",955],["mu",956],["nu",957],["xi",958],["omicron",959],["pi",960],["rho",961],["sigmaf",962],["sigma",963],["tau",964],["upsilon",965],["phi",966],["chi",967],["psi",968],["omega",969],["thetasym",977],["upsih",978],["piv",982],["bull",8226],["hellip",8230],["prime",8242],["Prime",8243],["oline",8254],["frasl",8260],["weierp",8472],["image",8465],["real",8476],["trade",8482],["alefsym",8501],["larr",8592],["uarr",8593],["rarr",8594],["darr",8595],["harr",8596],["crarr",8629],["lArr",8656],["uArr",8657],["rArr",8658],["dArr",8659],["hArr",8660],["forall",8704],["part",8706],["exist",8707],["empty",8709],["nabla",8711],["isin",8712],["notin",8713],["ni",8715],["prod",8719],["sum",8721],["minus",8722],["lowast",8727],["radic",8730],["prop",8733],["infin",8734],["ang",8736],["and",8743],["or",8744],["cap",8745],["cup",8746],["int",8747],["there4",8756],["sim",8764],["cong",8773],["asymp",8776],["ne",8800],["equiv",8801],["le",8804],["ge",8805],["sub",8834],["sup",8835],["nsub",8836],["sube",8838],["supe",8839],["oplus",8853],["otimes",8855],["perp",8869],["sdot",8901],["lceil",8968],["rceil",8969],["lfloor",8970],["rfloor",8971],["lang",9001],["rang",9002],["spades",9824],["clubs",9827],["hearts",9829],["diams",9830],["loz",9674],["OElig",338],["oelig",339],["Scaron",352],["scaron",353],["Yuml",376],["circ",710],["tilde",732],["ndash",8211],["mdash",8212],["lsquo",8216],["rsquo",8217],["sbquo",8218],["ldquo",8220],["rdquo",8221],["bdquo",8222],["dagger",8224],["Dagger",8225],["permil",8240],["lsaquo",8249],["rsaquo",8250],["euro",8364],["NestedGreaterGreater",8811],["NestedLessLess",8810]],l=[["nbsp",160],["thinsp",8201],["ensp",8194],["emsp",8195],["shy",173],["zwnj",8204],["zwj",8205],["lrm",8206],["rlm",8207]],e=new(function(){function e(){a(this,e),this._entities=this._prepareEntities([].concat(u,l)),this._entitiesByName={},this._entitiesByNameEntity={},this._entitiesByDigitEntity={},this._entitiesByUtf={},this._entities.forEach(function(e){this._entitiesByName[e.name]=e,this._entitiesByNameEntity[e.nameEntity]=e,this._entitiesByDigitEntity[e.digitEntity]=e,this._entitiesByUtf[e.utf]=e},this),this._invisibleEntities=this._prepareEntities(l)}return t(e,[{key:"toUtf",value:function(e){var a=this;-1!==e.text.search(/&#/)&&(e.text=this.decHexToUtf(e.text)),-1!==e.text.search(/&[a-z]/i)&&(e.text=e.text.replace(/&[a-z\d]{2,31};/gi,function(e){var t=a._entitiesByNameEntity[e];return t?t.utf:e}))}},{key:"decHexToUtf",value:function(e){return e.replace(/&#(\d{1,6});/gi,function(e,t){return String.fromCharCode(parseInt(t,10))}).replace(/&#x([\da-f]{1,6});/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})}},{key:"restore",value:function(e){var t=e.prefs.htmlEntity,a=t.type,n=this._entities;"name"!==a&&"digit"!==a||((t.onlyInvisible||t.list)&&(n=[],t.onlyInvisible&&(n=n.concat(this._invisibleEntities)),t.list&&(n=n.concat(this._prepareListParam(t.list)))),e.text=this._restoreEntitiesByIndex(e.text,a+"Entity",n))}},{key:"getByUtf",value:function(e,t){var a="";switch(t){case"digit":a=this._entitiesByDigitEntity[e];break;case"name":a=this._entitiesByNameEntity[e];break;default:a=e}return a}},{key:"_prepareEntities",value:function(e){var s=[];return e.forEach(function(e){var t=i(e,2),a=t[0],n=t[1],r=String.fromCharCode(n);s.push({name:a,nameEntity:"&"+a+";",digitEntity:"&#"+n+";",utf:r,reName:new RegExp("&"+a+";","g"),reUtf:new RegExp(r,"g")})},this),s}},{key:"_prepareListParam",value:function(e){var a=[];return e.forEach(function(e){var t=this._entitiesByName[e];t&&a.push(t)},this),a}},{key:"_restoreEntitiesByIndex",value:function(t,a,e){return e.forEach(function(e){t=t.replace(e.reUtf,e[a])}),t}}]),e}()),o=function(){function e(){a(this,e);var t=[["\x3c!--","--\x3e"],["<!ENTITY",">"],["<!DOCTYPE",">"],["<\\?xml","\\?>"],["<!\\[CDATA\\[","\\]\\]>"]];["code","kbd","object","pre","samp","script","style","var"].forEach(function(e){t.push(["<"+e+"(\\s[^>]*?)?>","</"+e+">"])},this),this._tags={own:[],html:t.map(this._prepareRegExp),url:[f._reUrl]},this._groups=["own","html","url"]}return t(e,[{key:"add",value:function(e){this._tags.own.push(this._prepareRegExp(e))}},{key:"show",value:function(t,a){for(var e=f._privateLabel,n=new RegExp(e+"tf\\d+"+e,"g"),r=new RegExp(e+"tf\\d"),s=function(e){return t.safeTags.hidden[a][e]||e},i=0,u=this._tags[a].length;i<u&&(t.text=t.text.replace(n,s),-1!==t.text.search(r));i++);}},{key:"hide",value:function(t,e){t.safeTags=t.safeTags||{hidden:{},i:0},t.safeTags.hidden[e]={};var a=this._pasteLabel.bind(this,t,e);this._tags[e].forEach(function(e){t.text=t.text.replace(this._prepareRegExp(e),a)},this)}},{key:"hideHTMLTags",value:function(e){if(e.isHTML){var t=this._pasteLabel.bind(this,e,"html");e.text=e.text.replace(/<\/?[a-z][^]*?>/gi,t).replace(/&lt;\/?[a-z][^]*?&gt;/gi,t).replace(/&[gl]t;/gi,t)}}},{key:"getPrevLabel",value:function(e,t){for(var a=t-1;0<=a;a--)if(e[a]===f._privateLabel)return e.slice(a,t+1);return!1}},{key:"getNextLabel",value:function(e,t){for(var a=t+1;a<e.length;a++)if(e[a]===f._privateLabel)return e.slice(t,a+1);return!1}},{key:"getTagByLabel",value:function(a,n){var r=!1;return this._groups.some(function(e){var t=a.safeTags.hidden[e][n];return void 0!==t&&(r={group:e,value:t}),r}),r}},{key:"getTagInfo",value:function(e){if(e){var t={group:e.group};switch(e.group){case"html":t.name=e.value.split(/[<\s>]/)[1],t.isInline=-1<s.indexOf(t.name),t.isClosing=-1<e.value.search(/^<\//);break;case"url":t.isInline=!0;break;case"own":t.isInline=!1}return t}}},{key:"_pasteLabel",value:function(e,t,a){var n=e.safeTags,r=f._privateLabel+"tf"+n.i+f._privateLabel;return n.hidden[t][r]=a,n.i++,r}},{key:"_prepareRegExp",value:function(e){var t;if(e instanceof RegExp)t=e;else{var a=i(e,3),n=a[0],r=a[1],s=a[2];void 0===s&&(s="[^]*?"),t=new RegExp(n+s+r,"gi")}return t}}]),e}(),f=function(){function l(e){a(this,l),this._prefs="object"===r(e)?e:{},this._prefs.locale=l._prepareLocale(this._prefs.locale),this._prefs.live=this._prefs.live||!1,this._safeTags=new o,this._settings={},this._enabledRules={},this._innerRulesByQueues={},this._innerRules=[].concat(this._innerRules),this._innerRules.forEach(function(e){var t=e.queue||"default";this._innerRulesByQueues[t]=this._innerRulesByQueues[t]||[],this._innerRulesByQueues[t].push(e)},this),this._rulesByQueues={},this._rules=[].concat(this._rules),this._rules.forEach(function(e){var t=e.queue||"default";this._prepareRule(e),this._rulesByQueues[t]=this._rulesByQueues[t]||[],this._rulesByQueues[t].push(e)},this),this._prefs.disableRule&&this.disableRule(this._prefs.disableRule),this._prefs.enableRule&&this.enableRule(this._prefs.enableRule),this._separatePartsTags=["title","p","h[1-6]","select","legend"]}return t(l,[{key:"execute",value:function(e,t){if(!(e=""+e))return"";var a=this._prepareContext(e);return this._preparePrefs(a,t),this._process(a)}},{key:"_prepareContext",value:function(e){return{text:e,isHTML:this._isHTML(e),prefs:l.deepCopy(this._prefs),getData:function(t){return"char"===t?this.prefs.locale.map(function(e){return l.getData(e+"/"+t)}).join(""):l.getData(this.prefs.locale[0]+"/"+t)}}}},{key:"_preparePrefs",value:function(e,t){t=t||{};for(var a=e.prefs,n=0,r=["htmlEntity","lineEnding","processingSeparateParts","ruleFilter"];n<r.length;n++){var s=r[n];s in t?a[s]=t[s]:s in this._prefs&&(a[s]=this._prefs[s])}a.htmlEntity=a.htmlEntity||{},a.locale=l._prepareLocale(t.locale,this._prefs.locale);var i=a.locale,u=i[0];if(!i.length||!u)throw Error('Not defined the property "locale".');if(!l.hasLocale(u))throw Error('"'+u+'" is not supported locale.')}},{key:"_isHTML",value:function(e){return-1!==e.search(/(<\/?[a-z]|<!|&[lg]t;)/i)}},{key:"_splitBySeparateParts",value:function(r){if(!r.isHTML||!1===r.prefs.processingSeparateParts)return[r.text];var s=[],i=l._privateSeparateLabel,e=new RegExp("<("+this._separatePartsTags.join("|")+")(\\s[^>]*?)?>[^]*?</\\1>","gi"),u=0;return r.text.replace(e,function(e,t,a,n){return u!==n&&s.push((u?i:"")+r.text.slice(u,n)+i),s.push(e),u=n+e.length,e}),s.push(u?i+r.text.slice(u,r.text.length):r.text),s}},{key:"_process",value:function(t){t.text=this._removeCR(t.text),this._executeRules(t,"start"),this._safeTags.hide(t,"own"),this._executeRules(t,"hide-safe-tags-own"),this._safeTags.hide(t,"html"),this._executeRules(t,"hide-safe-tags-html");var e=t.isHTML,a=new RegExp(l._privateSeparateLabel,"g");return t.text=this._splitBySeparateParts(t).map(function(e){return t.text=e,t.isHTML=this._isHTML(e),this._safeTags.hideHTMLTags(t),this._safeTags.hide(t,"url"),this._executeRules(t,"hide-safe-tags-url"),this._executeRules(t,"hide-safe-tags"),l.HtmlEntities.toUtf(t),this._prefs.live&&(t.text=l._replaceNbsp(t.text)),this._executeRules(t,"utf"),this._executeRules(t),l.HtmlEntities.restore(t),this._executeRules(t,"html-entities"),this._safeTags.show(t,"url"),this._executeRules(t,"show-safe-tags-url"),t.text.replace(a,"")},this).join(""),t.isHTML=e,this._safeTags.show(t,"html"),this._executeRules(t,"show-safe-tags-html"),this._safeTags.show(t,"own"),this._executeRules(t,"show-safe-tags-own"),this._executeRules(t,"end"),this._fixLineEnding(t.text,t.prefs.lineEnding)}},{key:"getSetting",value:function(e,t){return this._settings[e]&&this._settings[e][t]}},{key:"setSetting",value:function(e,t,a){return this._settings[e]=this._settings[e]||{},this._settings[e][t]=a,this}},{key:"isEnabledRule",value:function(e){return this._enabledRules[e]}},{key:"isDisabledRule",value:function(e){return!this._enabledRules[e]}},{key:"enableRule",value:function(e){return this._enable(e,!0)}},{key:"disableRule",value:function(e){return this._enable(e,!1)}},{key:"addSafeTag",value:function(e,t,a){var n=e instanceof RegExp?e:[e,t,a];return this._safeTags.add(n),this}},{key:"_executeRules",value:function(t,e){e=e||"default";var a=this._rulesByQueues[e],n=this._innerRulesByQueues[e];n&&n.forEach(function(e){this._ruleIterator(t,e)},this),a&&a.forEach(function(e){this._ruleIterator(t,e)},this)}},{key:"_ruleIterator",value:function(e,t){var a=t._locale,n=this._prefs.live;if(!(!0===n&&!1===t.live||!1===n&&!0===t.live)&&("common"===a||a===e.prefs.locale[0])&&this.isEnabledRule(t.name)){if(e.prefs.ruleFilter&&!e.prefs.ruleFilter(t))return;this._onBeforeRule&&this._onBeforeRule(t.name,e.text,e),e.text=t.handler.call(this,e.text,this._settings[t.name],e),this._onAfterRule&&this._onAfterRule(t.name,e.text,e)}}},{key:"_removeCR",value:function(e){return e.replace(/\r\n?/g,"\n")}},{key:"_fixLineEnding",value:function(e,t){return"CRLF"===t?e.replace(/\n/g,"\r\n"):"CR"===t?e.replace(/\n/g,"\r"):e}},{key:"_prepareRule",value:function(e){var t=e.name,a=r(e.settings),n={};"object"===a?n=l.deepCopy(e.settings):"function"===a&&(n=e.settings(e)),this._settings[t]=n,this._enabledRules[t]=e._enabled}},{key:"_enable",value:function(e,t){return Array.isArray(e)?e.forEach(function(e){this._enableByMask(e,t)},this):this._enableByMask(e,t),this}},{key:"_enableByMask",value:function(e,a){if(e)if(-1!==e.search(/\*/)){var n=new RegExp(e.replace(/\//g,"\\/").replace(/\*/g,".*"));this._rules.forEach(function(e){var t=e.name;n.test(t)&&(this._enabledRules[t]=a)},this)}else this._enabledRules[e]=a}},{key:"_getRule",value:function(t){var a=null;return this._rules.some(function(e){return e.name===t&&(a=e,!0)}),a}}],[{key:"addRule",value:function(e){var t=i(e.name.split("/"),3),a=t[0],n=t[1],r=t[2];return e._enabled=!0!==e.disabled,e._locale=a,e._group=n,e._name=r,this.addLocale(e._locale),this._setIndex(e),this.prototype._rules.push(e),this._sortRules(this.prototype._rules),this}},{key:"addInnerRule",value:function(e){return this.prototype._innerRules.push(e),e._locale=e.name.split("/")[0],this}},{key:"deepCopy",value:function(e){return"object"===r(e)?JSON.parse(JSON.stringify(e)):e}},{key:"_repeat",value:function(e,t){for(var a="";1==(1&t)&&(a+=e),0!==(t>>>=1);)e+=e;return a}},{key:"_replace",value:function(e,t){for(var a=0;a<t.length;a++)e=e.replace(t[a][0],t[a][1]);return e}},{key:"_replaceNbsp",value:function(e){return e.replace(/\u00A0/g," ")}},{key:"_setIndex",value:function(e){var t=e.index,a=r(t),n=this.groupIndexes[e._group];"undefined"===a?t=n:"string"===a&&(t=n+parseInt(e.index,10)),e._index=t}},{key:"_sortRules",value:function(e){e.sort(function(e,t){return e._index>t._index?1:-1})}},{key:"_mix",value:function(t,a){Object.keys(a).forEach(function(e){t[e]=a[e]})}}]),l}();function c(e,t,a,n){return t+a.replace(/([^\u00A0])\u00A0([^\u00A0])/g,"$1 $2")+n}f._mix(f,{version:"6.8.2",inlineElements:s,blockElements:["address","article","aside","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"],groupIndexes:{symbols:110,space:210,dash:310,punctuation:410,nbsp:510,number:610,money:710,date:810,other:910,optalign:1010,typo:1110,html:1210},HtmlEntities:e,_reUrl:new RegExp("(https?|file|ftp)://([a-zA-Z0-9/+-=%&:_.~?]+[a-zA-Z0-9#+]*)","g"),_privateLabel:"\uf000",_privateSeparateLabel:"\uf001"}),f._mix(f.prototype,{_rules:[],_innerRules:[]}),f._mix(f,{getData:function(e){return this._data[e]},setData:function(t,e){"string"==typeof t?(this.addLocale(t),this._data[t]=e):"object"===r(t)&&Object.keys(t).forEach(function(e){this.addLocale(e),this._data[e]=t[e]},this)},_data:{}}),f._mix(f,{addLocale:function(e){var t=(e||"").split("/")[0];t&&"common"!==t&&!this.hasLocale(t)&&(this._locales.push(t),this._locales.sort())},getLocales:function(){return this._locales},hasLocale:function(e){return"common"===e||-1!==this._locales.indexOf(e)},_prepareLocale:function(e,t){var a=e||t,n=a;return Array.isArray(a)||(n=[a]),n},_locales:[]}),f.setData("be/char","\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u044b\u044c\u044d\u044e\u044f\u0451\u0456\u045e\u0491"),f.setData("be/quote",{left:"\xab\u201c",right:"\xbb\u201d"}),f.setData("bg/char","\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044c\u044e\u044f"),f.setData("bg/quote",{left:"\u201e\u2019",right:"\u201c\u2019"}),f.setData("ca/char","abcdefghijlmnopqrstuvxyz\xe0\xe7\xe8\xe9\xed\xef\xf2\xf3\xfa\xfc"),f.setData("ca/quote",{left:"\xab\u201c",right:"\xbb\u201d"}),f.setData("common/char","a-z"),f.setData("common/dash","--?|\u2012|\u2013|\u2014"),f.setData("common/quote",'\xab\u2039\xbb\u203a\u201e\u201c\u201f\u201d"'),f.setData("cs/char","a-z\xe1\xe9\xed\xf3\xfa\xfd\u010d\u010f\u011b\u0148\u0159\u0161\u0165\u016f\u017e"),f.setData("cs/quote",{left:"\u201e\u201a",right:"\u201c\u2018"}),f.setData("da/char","a-z\xe5\xe6\xf8"),f.setData("da/quote",{left:"\xbb\u203a",right:"\xab\u2039"}),f.setData("de/char","a-z\xdf\xe4\xf6\xfc"),f.setData("de/quote",{left:"\u201e\u201a",right:"\u201c\u2018"}),f.setData("el/char","\u0390\u03ac\u03ad\u03ae\u03af\u03b0\u03b1\u03b2\u03b3\u03b4\u03b5\u03b6\u03b7\u03b8\u03b9\u03ba\u03bb\u03bc\u03bd\u03be\u03bf\u03c0\u03c1\u03c2\u03c3\u03c4\u03c5\u03c6\u03c7\u03c8\u03c9\u03ca\u03cb\u03cc\u03cd\u03ce\u03f2\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d"),f.setData("el/quote",{left:"\xab\u201c",right:"\xbb\u201d"}),f.setData("en-GB/char","a-z"),f.setData("en-GB/quote",{left:"\u2018\u201c",right:"\u2019\u201d"}),f.setData("en-US/char","a-z"),f.setData("en-US/quote",{left:"\u201c\u2018",right:"\u201d\u2019"}),f.setData("eo/char","abcdefghijklmnoprstuvz\u0109\u011d\u0125\u0135\u015d\u016d"),f.setData("eo/quote",{left:"\u201c\u2018",right:"\u201d\u2019"}),f.setData("es/char","a-z\xe1\xe9\xed\xf1\xf3\xfa\xfc"),f.setData("es/quote",{left:"\xab\u201c",right:"\xbb\u201d"}),f.setData("et/char","abdefghijklmnoprstuvz\xe4\xf5\xf6\xfc\u0161\u017e"),f.setData("et/quote",{left:"\u201e\xab",right:"\u201c\xbb"}),f.setData("fi/char","abcdefghijklmnopqrstuvy\xf6\xe4\xe5"),f.setData("fi/quote",{left:"\u201d\u2019",right:"\u201d\u2019"}),f.setData("fr/char","a-z\xe0\xe2\xe7\xe8\xe9\xea\xeb\xee\xef\xf4\xfb\xfc\u0153\xe6"),f.setData("fr/quote",{left:"\xab\u2039",right:"\xbb\u203a",spacing:!0}),f.setData("ga/char","abcdefghilmnoprstuvwxyz\xe1\xe9\xed\xf3\xfa"),f.setData("ga/quote",{left:"\u201c\u2018",right:"\u201d\u2019"}),f.setData("hu/char","a-z\xe1\xe4\xe9\xed\xf3\xf6\xfa\xfc\u0151\u0171"),f.setData("hu/quote",{left:"\u201e\xbb",right:"\u201d\xab"}),f.setData("it/char","a-z\xe0\xe9\xe8\xec\xf2\xf9"),f.setData("it/quote",{left:"\xab\u201c",right:"\xbb\u201d"}),f.setData("lv/char","abcdefghijklmnopqrstuvxz\xe6\u0153"),f.setData("lv/quote",{left:"\xab\u201e",right:"\xbb\u201c"}),f.setData("nl/char","a-z\xe4\xe7\xe8\xe9\xea\xeb\xee\xef\xf1\xf6\xfb\xfc"),f.setData("nl/quote",{left:"\u2018\u201c",right:"\u2019\u201d"}),f.setData("no/char","a-z\xe5\xe6\xe8\xe9\xea\xf2\xf3\xf4\xf8"),f.setData("no/quote",{left:"\xab\u2019",right:"\xbb\u2019"}),f.setData("pl/char","abcdefghijklmnoprstuvwxyz\xf3\u0105\u0107\u0119\u0142\u0144\u015b\u017a\u017c"),f.setData("pl/quote",{left:"\u201e\xab",right:"\u201d\xbb"}),f.setData("ro/char","abcdefghijklmnoprstuvxz\xee\u0103\u0219\u021b"),f.setData("ro/quote",{left:"\u201e\xab",right:"\u201d\xbb"}),f.setData("ru/char","\u0430-\u044f\u0451"),f.setData({"ru/dashBefore":"(^| |\\n)","ru/dashAfter":"(?=[\xa0 ,.?:!]|$)","ru/dashAfterDe":"(?=[,.?:!]|[\xa0 ][^\u0410-\u042f\u0401]|$)"}),f.setData({"ru/l":"\u0430-\u044f\u0451a-z","ru/L":"\u0410-\u042f\u0401A-Z"}),f.setData({"ru/month":"\u044f\u043d\u0432\u0430\u0440\u044c|\u0444\u0435\u0432\u0440\u0430\u043b\u044c|\u043c\u0430\u0440\u0442|\u0430\u043f\u0440\u0435\u043b\u044c|\u043c\u0430\u0439|\u0438\u044e\u043d\u044c|\u0438\u044e\u043b\u044c|\u0430\u0432\u0433\u0443\u0441\u0442|\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c|\u043e\u043a\u0442\u044f\u0431\u0440\u044c|\u043d\u043e\u044f\u0431\u0440\u044c|\u0434\u0435\u043a\u0430\u0431\u0440\u044c","ru/monthGenCase":"\u044f\u043d\u0432\u0430\u0440\u044f|\u0444\u0435\u0432\u0440\u0430\u043b\u044f|\u043c\u0430\u0440\u0442\u0430|\u0430\u043f\u0440\u0435\u043b\u044f|\u043c\u0430\u044f|\u0438\u044e\u043d\u044f|\u0438\u044e\u043b\u044f|\u0430\u0432\u0433\u0443\u0441\u0442\u0430|\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f|\u043e\u043a\u0442\u044f\u0431\u0440\u044f|\u043d\u043e\u044f\u0431\u0440\u044f|\u0434\u0435\u043a\u0430\u0431\u0440\u044f","ru/monthPreCase":"\u044f\u043d\u0432\u0430\u0440\u0435|\u0444\u0435\u0432\u0440\u0430\u043b\u0435|\u043c\u0430\u0440\u0442\u0435|\u0430\u043f\u0440\u0435\u043b\u0435|\u043c\u0430\u0435|\u0438\u044e\u043d\u0435|\u0438\u044e\u043b\u0435|\u0430\u0432\u0433\u0443\u0441\u0442\u0435|\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u0435|\u043e\u043a\u0442\u044f\u0431\u0440\u0435|\u043d\u043e\u044f\u0431\u0440\u0435|\u0434\u0435\u043a\u0430\u0431\u0440\u0435","ru/shortMonth":"\u044f\u043d\u0432|\u0444\u0435\u0432|\u043c\u0430\u0440|\u0430\u043f\u0440|\u043c\u0430[\u0435\u0439\u044f]|\u0438\u044e\u043d|\u0438\u044e\u043b|\u0430\u0432\u0433|\u0441\u0435\u043d|\u043e\u043a\u0442|\u043d\u043e\u044f|\u0434\u0435\u043a"}),f.setData("ru/quote",{left:"\xab\u201e\u201a",right:"\xbb\u201c\u2018",removeDuplicateQuotes:!0}),f.setData("ru/weekday","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a|\u0432\u0442\u043e\u0440\u043d\u0438\u043a|\u0441\u0440\u0435\u0434\u0430|\u0447\u0435\u0442\u0432\u0435\u0440\u0433|\u043f\u044f\u0442\u043d\u0438\u0446\u0430|\u0441\u0443\u0431\u0431\u043e\u0442\u0430|\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"),f.setData("sk/char","abcdefghijklmnoprstuvwxyz\xe1\xe4\xe9\xed\xf3\xf4\xfa\xfd\u010d\u010f\u013e\u0148\u0155\u0161\u0165\u017e"),f.setData("sk/quote",{left:"\u201e\u201a",right:"\u201c\u2018"}),f.setData("sl/char","a-z\u010d\u0161\u017e"),f.setData("sl/quote",{left:"\u201e\u201a",right:"\u201c\u2018"}),f.setData("sr/char","abcdefghijklmnoprstuvz\u0107\u010d\u0111\u0161\u017e"),f.setData("sr/quote",{left:"\u201e\u2019",right:"\u201d\u2019"}),f.setData("sv/char","a-z\xe4\xe5\xe9\xf6"),f.setData("sv/quote",{left:"\u201d\u2019",right:"\u201d\u2019"}),f.setData("tr/char","abcdefghijklmnoprstuvyz\xe2\xe7\xee\xf6\xfb\xfc\u011f\u0131\u015f"),f.setData("tr/quote",{left:"\u201c\u2018",right:"\u201d\u2019"}),f.setData("uk/char","\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044c\u044e\u044f\u0454\u0456\u0457\u0491"),f.setData("uk/quote",{left:"\xab\u201e",right:"\xbb\u201c"}),f.addRule({name:"common/html/e-mail",queue:"end",handler:function(e,t,a){return a.isHTML?e:e.replace(/(^|[\s;(])([\w\-.]{2,64})@([\w\-.]{2,64})\.([a-z]{2,64})([)\s.,!?]|$)/gi,'$1<a href="mailto:$2@$3.$4">$2@$3.$4</a>$5')},disabled:!0,htmlAttrs:!1}),f.addRule({name:"common/html/escape",index:"+100",queue:"end",handler:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return e.replace(/[&<>"'/]/g,function(e){return t[e]})},disabled:!0}),f.addRule({name:"common/html/nbr",index:"+10",queue:"end",handler:function(e){return e.replace(/([^\n>])\n(?=[^\n])/g,"$1<br/>\n")},disabled:!0,htmlAttrs:!1}),f.addRule({name:"common/html/p",index:"+5",queue:"end",handler:function(e){var n=new RegExp("<("+f.blockElements.join("|")+")[>\\s]"),t=e.split("\n\n");return t.forEach(function(e,t,a){e.trim()&&(n.test(e)||(a[t]=e.replace(/^(\s*)/,"$1<p>").replace(/(\s*)$/,"</p>$1")))}),t.join("\n\n")},disabled:!0,htmlAttrs:!1}),f.addRule({name:"common/html/processingAttrs",queue:"hide-safe-tags-own",handler:function(e,t,a){var u=this,n=new RegExp("(^|\\s)("+t.attrs.join("|")+")=(\"[^\"]*?\"|'[^']*?')","gi"),l=f.deepCopy(a.prefs);return l.ruleFilter=function(e){return!1!==e.htmlAttrs},e.replace(/(<[-\w]+\s)([^>]+?)(?=>)/g,function(e,t,a){return t+a.replace(n,function(e,t,a,n){var r=n[0],s=n[n.length-1],i=n.slice(1,-1);return t+a+"="+r+u.execute(i,l)+s})})},settings:{attrs:["title","placeholder"]},disabled:!0,htmlAttrs:!1}),f.addRule({name:"common/html/quot",queue:"hide-safe-tags",handler:function(e){return e.replace(/&quot;/g,'"')}}),f.addRule({name:"common/html/stripTags",index:"+99",queue:"end",handler:function(e){return e.replace(/<[^>]+>/g,"")},disabled:!0}),f.addRule({name:"common/html/url",queue:"end",handler:function(e,t,a){return a.isHTML?e:e.replace(f._reUrl,function(e,t,a){a=a.replace(/([^/]+\/?)(\?|#)$/,"$1").replace(/^([^/]+)\/$/,"$1"),"http"===t?a=a.replace(/^([^/]+)(:80)([^\d]|\/|$)/,"$1$3"):"https"===t&&(a=a.replace(/^([^/]+)(:443)([^\d]|\/|$)/,"$1$3"));var n=a,r=t+"://"+a,s='<a href="'+r+'">';return"http"===t||"https"===t?(n=n.replace(/^www\./,""),s+("http"===t?n:t+"://"+n)+"</a>"):s+r+"</a>"})},disabled:!0,htmlAttrs:!1}),f.addRule({name:"common/nbsp/afterNumber",handler:function(e,t,a){var n="(^|\\D)(\\d{1,5}) (["+a.getData("char")+"]+)";return e.replace(new RegExp(n,"gi"),"$1$2\xa0$3")},disabled:!0}),f.addRule({name:"common/nbsp/afterParagraphMark",handler:function(e){return e.replace(/\xb6 ?(?=\d)/g,"\xb6\xa0")}}),f.addRule({name:"common/nbsp/afterSectionMark",handler:function(e,t,a){var n=a.prefs.locale[0];return e.replace(/\xa7[ \u00A0\u2009]?(?=\d|I|V|X)/g,"ru"===n?"\xa7\u202f":"\xa7\xa0")}}),f.addRule({name:"common/nbsp/afterShortWord",handler:function(e,t,a){var n=t.lengthShortWord,r="(^|["+(" \xa0("+f._privateLabel+f.getData("common/quote"))+"])(["+a.getData("char")+"]{1,"+n+"}) ",s=new RegExp(r,"gim");return e.replace(s,"$1$2\xa0").replace(s,"$1$2\xa0")},settings:{lengthShortWord:2}}),f.addRule({name:"common/nbsp/beforeShortLastNumber",handler:function(e,t,a){var n=a.getData("char"),r=n.toUpperCase(),s=new RegExp("(["+n+r+"]) (?=\\d{1,"+t.lengthLastNumber+"}[-+\u2212%'\""+a.getData("quote").right+"]?([.!?\u2026]( ["+r+"]|$)|$))","gm");return e.replace(s,"$1\xa0")},live:!1,settings:{lengthLastNumber:2}}),f.addRule({name:"common/nbsp/beforeShortLastWord",handler:function(e,t,a){var n=a.getData("char"),r=n.toUpperCase(),s=new RegExp("(["+n+"\\d]) (["+n+r+"]{1,"+t.lengthLastWord+"}[.!?\u2026])( ["+r+"]|$)","g");return e.replace(s,"$1\xa0$2$3")},settings:{lengthLastWord:3}}),f.addRule({name:"common/nbsp/dpi",handler:function(e){return e.replace(/(\d) ?(lpi|dpi)(?!\w)/,"$1\xa0$2")}}),f.addRule({name:"common/nbsp/nowrap",queue:"end",handler:function(e){return e.replace(/(<nowrap>)(.*?)(<\/nowrap>)/g,c).replace(/(<nobr>)(.*?)(<\/nobr>)/g,c)}}),f.addRule({name:"common/nbsp/replaceNbsp",queue:"utf",live:!1,handler:f._replaceNbsp,disabled:!0}),f.addRule({name:"common/number/fraction",handler:function(e){return e.replace(/(^|\D)1\/2(\D|$)/g,"$1\xbd$2").replace(/(^|\D)1\/4(\D|$)/g,"$1\xbc$2").replace(/(^|\D)3\/4(\D|$)/g,"$1\xbe$2")}}),f.addRule({name:"common/number/mathSigns",handler:function(e){return f._replace(e,[[/!=/g,"\u2260"],[/<=/g,"\u2264"],[/(^|[^=])>=/g,"$1\u2265"],[/<=>/g,"\u21d4"],[/<</g,"\u226a"],[/>>/g,"\u226b"],[/~=/g,"\u2245"],[/(^|[^+])\+-/g,"$1\xb1"]])}}),f.addRule({name:"common/number/times",handler:function(e){return e.replace(/(\d)[ \u00A0]?[x\u0445][ \u00A0]?(\d)/g,"$1\xd7$2")}}),f.addRule({name:"common/other/delBOM",queue:"start",index:-1,handler:function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}}),f.addRule({name:"common/other/repeatWord",handler:function(e,t,a){var n="[;:,.?! \n"+f.getData("common/quote")+"]",r=new RegExp("("+n+"|^)(["+a.getData("char")+"]{"+t.min+",}) \\2("+n+"|$)","gi");return e.replace(r,"$1$2$3")},settings:{min:2},disabled:!0}),f.addRule({name:"common/space/afterPunctuation",handler:function(e){var t=f._privateLabel,a=new RegExp("(!|;|\\?)([^).\u2026!;?\\s[\\])"+t+f.getData("common/quote")+"])","g"),n=new RegExp('(\\D)(,|:)([^)",:.?\\s\\/\\\\'+t+"])","g");return e.replace(a,"$1 $2").replace(n,"$1$2 $3")}}),f.addRule({name:"common/space/beforeBracket",handler:function(e,t,a){var n=new RegExp("(["+a.getData("char")+".!?,;\u2026)])\\(","gi");return e.replace(n,"$1 (")}}),f.addRule({name:"common/space/bracket",handler:function(e){return e.replace(/(\() +/g,"(").replace(/ +\)/g,")")}}),f.addRule({name:"common/space/delBeforePercent",handler:function(e){return e.replace(/(\d)( |\u00A0)(%|\u2030|\u2031)/g,"$1$3")}}),f.addRule({name:"common/space/delBeforePunctuation",handler:function(e){return e.replace(/([!?]) (?=[!?])/g,"$1").replace(/(^|[^!?:;,.\u2026]) ([!?:;,.])(?!\))/g,"$1$2")}}),f.addRule({name:"common/space/delLeadingBlanks",handler:function(e){return e.replace(/\n[ \t]+/g,"\n")},disabled:!0}),f.addRule({name:"common/space/delRepeatN",index:"-1",handler:function(e){return e.replace(/\n{3,}/g,"\n\n")}}),f.addRule({name:"common/space/delRepeatSpace",index:"-1",handler:function(e){return e.replace(/([^\n \t])[ \t]{2,}(?![\n \t])/g,"$1 ")}}),f.addRule({name:"common/space/delTrailingBlanks",index:"-3",handler:function(e){return e.replace(/[ \t]+\n/g,"\n")}}),f.addRule({name:"common/space/replaceTab",index:"-5",handler:function(e){return e.replace(/\t/g,"    ")}}),f.addRule({name:"common/space/squareBracket",handler:function(e){return e.replace(/(\[) +/g,"[").replace(/ +\]/g,"]")}}),f.addRule({name:"common/space/trimLeft",index:"-4",handler:String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.replace(/^[\s\uFEFF\xA0]+/g,"")}}),f.addRule({name:"common/space/trimRight",index:"-3",live:!1,handler:String.prototype.trimRight?function(e){return e.trimRight()}:function(e){return e.replace(/[\s\uFEFF\xA0]+$/g,"")}}),f.addRule({name:"common/punctuation/apostrophe",handler:function(e,t,a){var n="(["+a.getData("char")+"])",r=new RegExp(n+"'"+n,"gi");return e.replace(r,"$1\u2019$2")}}),f.addRule({name:"common/punctuation/delDoublePunctuation",handler:function(e){return e.replace(/(^|[^,]),,(?!,)/g,"$1,").replace(/(^|[^:])::(?!:)/g,"$1:").replace(/(^|[^!?.])\.\.(?!\.)/g,"$1.").replace(/(^|[^;]);;(?!;)/g,"$1;").replace(/(^|[^?])\?\?(?!\?)/g,"$1?")}}),f.addRule({name:"common/punctuation/hellip",handler:function(e,t,a){return"ru"===a.prefs.locale[0]?e.replace(/(^|[^.])\.{3,4}(?=[^.]|$)/g,"$1\u2026"):e.replace(/(^|[^.])\.{3}(\.?)(?=[^.]|$)/g,"$1\u2026$2")}});var d,p,g,h,m,v,R,$,b,_={bufferQuotes:{left:"\uf005\uf006\uf007",right:"\uf008\uf009\uf0a0"},maxLevel:3,beforeLeft:" \n\t\xa0[(",afterRight:" \n\t\xa0!?.:;#*,\u2026)",process:function(e){var t=e.context.text;if(!this.count(t).total)return t;var a=e.settings,n=e.settings.left[0]===e.settings.right[0];return n&&(e.settings=f.deepCopy(e.settings),e.settings.left=this.bufferQuotes.left.slice(0,e.settings.left.length),e.settings.right=this.bufferQuotes.right.slice(0,e.settings.right.length)),e.settings.spacing&&(t=this.removeSpacing(t,e.settings)),t=this.set(t,e),e.settings.spacing&&(t=this.setSpacing(t,e.settings)),e.settings.removeDuplicateQuotes&&(t=this.removeDuplicates(t,e.settings)),n&&(t=this.returnOriginalQuotes(t,a,e.settings),e.settings=a),t},returnOriginalQuotes:function(e,t,a){for(var n={},r=0;r<a.left.length;r++)n[a.left[r]]=t.left[r],n[a.right[r]]=t.right[r];return e.replace(new RegExp("["+a.left+a.right+"]","g"),function(e){return n[e]})},count:function(e){var t={total:0};return e.replace(new RegExp("["+f.getData("common/quote")+"]","g"),function(e){return t[e]||(t[e]=0),t[e]++,t.total++,e}),t},removeDuplicates:function(e,t){var a=t.left[0],n=t.left[1]||a,r=t.right[0];return a!==n?e:e.replace(new RegExp(a+a,"g"),a).replace(new RegExp(r+r,"g"),r)},removeSpacing:function(e,t){for(var a=0,n=t.left.length;a<n;a++){var r=t.left[a],s=t.right[a];e=e.replace(new RegExp(r+"([ \u202f\xa0])","g"),r).replace(new RegExp("([ \u202f\xa0])"+s,"g"),s)}return e},setSpacing:function(e,t){for(var a=0,n=t.left.length;a<n;a++){var r=t.left[a],s=t.right[a];e=e.replace(new RegExp(r+"([^\u202f])","g"),r+"\u202f$1").replace(new RegExp("([^\u202f])"+s,"g"),"$1\u202f"+s)}return e},set:function(e,t){var a=f._privateLabel,n=f.getData("common/quote"),r=t.settings.left[0],s=t.settings.left[1]||r,i=t.settings.right[0],u=new RegExp("(^|["+this.beforeLeft+"])(["+n+"]{1,"+this.maxLevel+"})(?=[^\\s"+a+"])","gim"),l=new RegExp("([^\\s"+a+"])(["+n+"]{1,"+this.maxLevel+"})(?=["+this.afterRight+"]|$)","gim");return e=e.replace(u,function(e,t,a){return t+f._repeat(r,a.length)}).replace(l,function(e,t,a){return t+f._repeat(i,a.length)}),e=this.setAboveTags(e,t),r!==s&&(e=this.setInner(e,t.settings)),e},setAboveTags:function(o,c){var d=this,p=f._privateLabel,e=f.getData("common/quote"),g=c.settings.left[0],h=c.settings.right[0];return o.replace(new RegExp("(^|.)(["+e+"])(.|$)","gm"),function(e,t,a,n,r){if(t!==p&&n!==p)return e;if(t===p&&n===p)return'"'===a?t+d.getAboveTwoTags(o,r+1,c)+n:e;if(t===p){var s=-1<d.afterRight.indexOf(n),i=d.getPrevTagInfo(o,r-1,c);return s&&i&&"html"===i.group?t+(i.isClosing?h:g)+n:t+(!n||s?h:g)+n}var u=-1<d.beforeLeft.indexOf(t),l=d.getNextTagInfo(o,r+1,c);return u&&l&&"html"===l.group?t+(l.isClosing?h:g)+n:t+(!t||u?g:h)+n})},getAboveTwoTags:function(e,t,a){var n=this.getPrevTagInfo(e,t,a),r=this.getNextTagInfo(e,t,a);if(n&&"html"===n.group){if(!n.isClosing)return a.settings.left[0];if(r&&r.isClosing&&n.isClosing)return a.settings.right[0]}return e[t]},getPrevTagInfo:function(e,t,a){var n=a.safeTags.getPrevLabel(e,t-1);if(n){var r=a.safeTags.getTagByLabel(a.context,n);if(r)return a.safeTags.getTagInfo(r)}return null},getNextTagInfo:function(e,t,a){var n=a.safeTags.getNextLabel(e,t+1);if(n){var r=a.safeTags.getTagByLabel(a.context,n);if(r)return a.safeTags.getTagInfo(r)}return null},setInner:function(e,t){for(var a=[],n=[],r=0;r<t.left.length;r++)a.push(t.left[r]),n.push(t.right[r]);for(var s=t.left[0],i=t.right[0],u=a.length-1,l=-1,o="",c=0,d=e.length;c<d;c++){var p=e[c];p===s?(u<++l&&(l=u),o+=a[l]):p===i?l<=-1?o+=n[l=0]:(o+=n[l],--l<-1&&(l=-1)):('"'===p&&(l=-1),o+=p)}var g=this.count(o,t);return g[s]!==g[i]?e:o}};function x(e){var t,a,n=e[0],r="";if(e.length<8)return y(e);if(10<e.length)if("+"===n){if("7"!==e[1])return e;t=!0,e=e.substr(2)}else"8"===n&&(a=!0,e=e.substr(1));for(var s=8;2<=s;s--){var i=+e.substr(0,s);if(-1<R.indexOf(i)){r=e.substr(0,s),e=e.substr(s);break}}return r||(r=e.substr(0,5),e=e.substr(5)),(t?"+7\xa0":"")+(a?"8\xa0":"")+function(e){var t=+e,a=e.length,n=[e],r=!1;if(3<a)switch(a){case 4:n=[e.substr(0,2),e.substr(2,2)];break;case 5:n=[e.substr(0,3),e.substr(3,3)];break;case 6:n=[e.substr(0,2),e.substr(2,2),e.substr(4,2)]}else r=900<t&&t<=999||495==t||499==t;return n=n.join("-"),r?n:"("+n+")"}(r)+"\xa0"+y(e)}function y(e){var t="";return e.length%2&&(t=e[0],t+=e.length<=5?"-":"",e=e.substr(1,e.length-1)),t+e.split(/(?=(?:\d\d)+$)/).join("-")}function E(e){return e.replace(/[^\d+]/g,"")}return f.addRule({name:"common/punctuation/quote",handler:function(e,t,a){var n=t[a.prefs.locale[0]];return n?_.process({context:a,settings:n,safeTags:this._safeTags}):e},settings:function(){var t={};return f.getLocales().forEach(function(e){t[e]=f.deepCopy(f.getData(e+"/quote"))}),t}}),f.addRule({name:"common/punctuation/quoteLink",queue:"show-safe-tags-html",index:"+5",handler:function(e,t,a){var n=this.getSetting("common/punctuation/quote",a.prefs.locale[0]);if(!n)return e;var r=f.HtmlEntities,s=r.getByUtf(n.left[0]),i=r.getByUtf(n.right[0]),u=r.getByUtf(n.left[1]),l=r.getByUtf(n.right[1]);u=u?"|"+u:"",l=l?"|"+l:"";var o=new RegExp("(<[aA]\\s[^>]*?>)("+s+u+")([^]*?)("+i+l+")(</[aA]>)","g");return e.replace(o,"$2$1$3$5$4")}}),f.addRule({name:"ru/dash/centuries",handler:function(e,t){var a="("+f.getData("common/dash")+")",n=new RegExp("(X|I|V)[ |\xa0]?"+a+"[ |\xa0]?(X|I|V)","g");return e.replace(n,"$1"+t.dash+"$3")},settings:{dash:"\u2013"}}),f.addRule({name:"ru/dash/daysMonth",handler:function(e,t){var a=new RegExp("(^|\\s)([123]?\\d)("+f.getData("common/dash")+")([123]?\\d)[ \xa0]("+f.getData("ru/monthGenCase")+")","g");return e.replace(a,"$1$2"+t.dash+"$4\xa0$5")},settings:{dash:"\u2013"}}),f.addRule({name:"ru/dash/de",handler:function(e){var t=new RegExp("([a-\u044f\u0451]+) \u0434\u0435"+f.getData("ru/dashAfterDe"),"g");return e.replace(t,"$1-\u0434\u0435")},disabled:!0}),f.addRule({name:"ru/dash/decade",handler:function(e,t){var a=new RegExp("(^|\\s)(\\d{3}|\\d)0("+f.getData("common/dash")+")(\\d{3}|\\d)0(-\u0435[ \xa0])(?=\u0433\\.?[ \xa0]?\u0433|\u0433\u043e\u0434)","g");return e.replace(a,"$1$20"+t.dash+"$40$5")},settings:{dash:"\u2013"}}),f.addRule({name:"ru/dash/directSpeech",handler:function(e){var t=f.getData("common/dash"),a=new RegExp('(["\xbb\u2018\u201c,])[ |\xa0]?('+t+")[ |\xa0]","g"),n=new RegExp("(^|"+f._privateLabel+")("+t+")( |\xa0)","gm"),r=new RegExp("([.\u2026?!])[ \xa0]("+t+")[ \xa0]","g");return e.replace(a,"$1\xa0\u2014 ").replace(n,"$1\u2014\xa0").replace(r,"$1 \u2014\xa0")}}),f.addRule({name:"ru/dash/izpod",handler:function(e){var t=new RegExp(f.getData("ru/dashBefore")+"(\u0418|\u0438)\u0437 \u043f\u043e\u0434"+f.getData("ru/dashAfter"),"g");return e.replace(t,"$1$2\u0437-\u043f\u043e\u0434")}}),f.addRule({name:"ru/dash/izza",handler:function(e){var t=new RegExp(f.getData("ru/dashBefore")+"(\u0418|\u0438)\u0437 \u0437\u0430"+f.getData("ru/dashAfter"),"g");return e.replace(t,"$1$2\u0437-\u0437\u0430")}}),f.addRule({name:"ru/dash/ka",handler:function(e){var t=new RegExp("([a-\u044f\u0451]+) \u043a\u0430(\u0441\u044c)?"+f.getData("ru/dashAfter"),"g");return e.replace(t,"$1-\u043a\u0430$2")}}),f.addRule({name:"ru/dash/koe",handler:function(e){var t=new RegExp(f.getData("ru/dashBefore")+"([\u041a\u043a]\u043e[\u0435\u0439])\\s([\u0430-\u044f\u0451]{3,})"+f.getData("ru/dashAfter"),"g");return e.replace(t,"$1$2-$3")}}),f.addRule({name:"ru/dash/main",index:"-5",handler:function(e){var t=f.getData("common/dash"),a=new RegExp("([ \xa0])("+t+")([ \xa0\\n])","g");return e.replace(a,"\xa0\u2014$3")}}),f.addRule({name:"ru/dash/month",handler:function(e,t){var a="("+f.getData("ru/month")+")",n="("+f.getData("ru/monthPreCase")+")",r=f.getData("common/dash"),s=new RegExp(a+" ?("+r+") ?"+a,"gi"),i=new RegExp(n+" ?("+r+") ?"+n,"gi"),u="$1"+t.dash+"$3";return e.replace(s,u).replace(i,u)},settings:{dash:"\u2013"}}),f.addRule({name:"ru/dash/surname",handler:function(e){var t=new RegExp("([\u0410-\u042f\u0401][\u0430-\u044f\u0451]+)\\s-([\u0430-\u044f\u0451]{1,3})(?![^\u0430-\u044f\u0451]|$)","g");return e.replace(t,"$1\xa0\u2014$2")}}),f.addRule({name:"ru/dash/taki",handler:function(e){var t=new RegExp("(\u0432\u0435\u0440\u043d\u043e|\u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e|\u043e\u043f\u044f\u0442\u044c|\u043f\u0440\u044f\u043c\u043e|\u0442\u0430\u043a|\u0432\u0441[\u0435\u0451]|\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e|\u043d\u0435\u0443\u0436\u0435\u043b\u0438)\\s(\u0442\u0430\u043a\u0438)"+f.getData("ru/dashAfter"),"g");return e.replace(t,"$1-$2")}}),f.addRule({name:"ru/dash/time",handler:function(e,t){var a=new RegExp(f.getData("ru/dashBefore")+"(\\d?\\d:[0-5]\\d)"+f.getData("common/dash")+"(\\d?\\d:[0-5]\\d)"+f.getData("ru/dashAfter"),"g");return e.replace(a,"$1$2"+t.dash+"$3")},settings:{dash:"\u2013"}}),f.addRule({name:"ru/dash/to",handler:function(e){var t=new RegExp("("+["\u043e\u0442\u043a\u0443\u0434\u0430","\u043a\u0443\u0434\u0430","\u0433\u0434\u0435","\u043a\u043e\u0433\u0434\u0430","\u0437\u0430\u0447\u0435\u043c","\u043f\u043e\u0447\u0435\u043c\u0443","\u043a\u0430\u043a","\u043a\u0430\u043a\u043e[\u0435\u0439\u043c]","\u043a\u0430\u043a\u0430\u044f","\u043a\u0430\u043a\u0438[\u0435\u043c\u0445]","\u043a\u0430\u043a\u0438\u043c\u0438","\u043a\u0430\u043a\u0443\u044e","\u0447\u0442\u043e","\u0447\u0435\u0433\u043e","\u0447\u0435[\u0439\u043c]","\u0447\u044c\u0438\u043c?","\u043a\u0442\u043e","\u043a\u043e\u0433\u043e","\u043a\u043e\u043c\u0443","\u043a\u0435\u043c"].join("|")+")( | -|- )(\u0442\u043e|\u043b\u0438\u0431\u043e|\u043d\u0438\u0431\u0443\u0434\u044c)"+f.getData("ru/dashAfter"),"gi");return e.replace(t,"$1-$3")}}),f.addRule({name:"ru/dash/weekday",handler:function(e,t){var a="("+f.getData("ru/weekday")+")",n=new RegExp(a+" ?("+f.getData("common/dash")+") ?"+a,"gi");return e.replace(n,"$1"+t.dash+"$3")},settings:{dash:"\u2013"}}),f.addRule({name:"ru/dash/years",handler:function(e,s){var t=f.getData("common/dash"),a=new RegExp("(\\D|^)(\\d{4})[ \xa0]?("+t+")[ \xa0]?(\\d{4})(?=[ \xa0]?\u0433)","g");return e.replace(a,function(e,t,a,n,r){return parseInt(a,10)<parseInt(r,10)?t+a+s.dash+r:e})},settings:{dash:"\u2013"}}),f.addRule({name:"common/symbols/arrow",handler:function(e){return f._replace(e,[[/(^|[^-])->(?!>)/g,"$1\u2192"],[/(^|[^<])<-(?!-)/g,"$1\u2190"]])}}),f.addRule({name:"common/symbols/cf",handler:function(e){var t=new RegExp('(^|[\\s(\\[+\u2248\xb1\u2212\u2014\u2013\\-])(\\d+(?:[.,]\\d+)?)[ \xa0\u2009]?(C|F)([\\W\\s.,:!?")\\]]|$)',"mg");return e.replace(t,"$1$2\u2009\xb0$3$4")}}),f.addRule({name:"common/symbols/copy",handler:function(e){return f._replace(e,[[/\(r\)/gi,"\xae"],[/(copyright )?\((c|\u0441)\)/gi,"\xa9"],[/\(tm\)/gi,"\u2122"]])}}),f.addRule({name:"ru/date/fromISO",handler:function(e){var t="(-|\\.|\\/)",a="(-|\\/)",n=new RegExp("(^|\\D)(\\d{4})"+t+"(\\d{2})"+t+"(\\d{2})(\\D|$)","gi"),r=new RegExp("(^|\\D)(\\d{2})"+a+"(\\d{2})"+a+"(\\d{4})(\\D|$)","gi");return e.replace(n,"$1$6.$4.$2$7").replace(r,"$1$4.$2.$6$7")}}),f.addRule({name:"ru/date/weekday",handler:function(e){var t=f.getData("ru/monthGenCase"),a=f.getData("ru/weekday"),n=new RegExp("(\\d)( |\xa0)("+t+"),( |\xa0)("+a+")","gi");return e.replace(n,function(){var e=arguments;return e[1]+e[2]+e[3].toLowerCase()+","+e[4]+e[5].toLowerCase()})}}),f.addRule({name:"ru/money/currency",handler:function(e){var t="([$\u20ac\xa5\u04b0\xa3\u20a4\u20bd])",a=new RegExp("(^|[\\D]{2})"+t+" ?([\\d.,]+([ \xa0\u2009\u202f]\\d{3})*)([ \xa0\u2009\u202f]?(\u0442\u044b\u0441\\.|\u043c\u043b\u043d|\u043c\u043b\u0440\u0434|\u0442\u0440\u043b\u043d))?","gm"),n=new RegExp("(^|[\\D])([\\d.,]+) ?"+t,"gm");return e.replace(a,function(e,t,a,n,r,s,i){return t+n+(i?"\xa0"+i:"")+"\xa0"+a}).replace(n,"$1$2\xa0$3")},disabled:!0}),f.addRule({name:"ru/money/ruble",handler:function(e){var t="$1\xa0\u20bd",a="(\\d+)( |\xa0)?(\u0440|\u0440\u0443\u0431)\\.",n=new RegExp("^"+a+"$","g"),r=new RegExp(a+"(?=[!?,:;])","g"),s=new RegExp(a+"(?=\\s+[A-\u042f\u0401])","g");return e.replace(n,t).replace(r,t).replace(s,t+".")},disabled:!0}),f.addRule({name:"ru/nbsp/abbr",handler:function(e){function t(e,t,a,n){return"\u0434\u0434"===a&&"\u043c\u043c"===n?e:-1<["\u0440\u0444","\u0440\u0443","\u0440\u0443\u0441","\u043e\u0440\u0433","\u0443\u043a\u0440","\u0431\u0433","\u0441\u0440\u0431"].indexOf(n)?e:t+a+".\xa0"+n+"."}var a=new RegExp("(^|\\s|"+f._privateLabel+")([\u0430-\u044f\u0451]{1,3})\\. ?([\u0430-\u044f\u0451]{1,3})\\.","g");return e.replace(a,t).replace(a,t)}}),f.addRule({name:"ru/nbsp/addr",handler:function(e){return e.replace(/(\s|^)(\u0434\u043e\u043c|\u0434\.|\u043a\u0432\.|\u043f\u043e\u0434\.|\u043f-\u0434) *(\d+)/gi,"$1$2\xa0$3").replace(/(\s|^)(\u043c\u043a\u0440-\u043d|\u043c\u043a-\u043d|\u043c\u043a\u0440\.|\u043c\u043a\u0440\u043d)\s/gi,"$1$2\xa0").replace(/(\s|^)(\u044d\u0442\.) *(-?\d+)/gi,"$1$2\xa0$3").replace(/(\s|^)(\d+) +\u044d\u0442\u0430\u0436([^\u0430-\u044f\u0451]|$)/gi,"$1$2\xa0\u044d\u0442\u0430\u0436$3").replace(/(\s|^)\u043b\u0438\u0442\u0435\u0440\s([\u0410-\u042f]|$)/gi,"$1\u043b\u0438\u0442\u0435\u0440\xa0$2").replace(/(\s|^)(\u043e\u0431\u043b|\u043a\u0440|\u0441\u0442|\u043f\u043e\u0441|\u0441|\u0434|\u0443\u043b|\u043f\u0435\u0440|\u043f\u0440|\u043f\u0440-\u0442|\u043f\u0440\u043e\u0441\u043f|\u043f\u043b|\u0431\u0443\u043b|\u0431-\u0440|\u043d\u0430\u0431|\u0448|\u0442\u0443\u043f|\u043e\u0444|\u043a\u043e\u043c\u043d?|\u0443\u0447|\u0432\u043b|\u0432\u043b\u0430\u0434|\u0441\u0442\u0440|\u043a\u043e\u0440)\. *([\u0430-\u044f\u0451a-z\d]+)/gi,"$1$2.\xa0$3").replace(/(\D[ \u00A0]|^)\u0433\. ?([\u0410-\u042f\u0401])/gm,"$1\u0433.\xa0$2")}}),f.addRule({name:"ru/nbsp/afterNumberSign",handler:function(e){return e.replace(/\u2116[ \u00A0\u2009]?(\d|\u043f\/\u043f)/g,"\u2116\u202f$1")}}),f.addRule({name:"ru/nbsp/beforeParticle",index:"+5",handler:function(e){var t="(\u043b\u0438|\u043b\u044c|\u0436\u0435|\u0436|\u0431\u044b|\u0431)",a=new RegExp("([\u0410-\u042f\u0401\u0430-\u044f\u0451]) "+t+'(?=[,;:?!"\u2018\u201c\xbb])',"g"),n=new RegExp("([\u0410-\u042f\u0401\u0430-\u044f\u0451])[ \xa0]"+t+"[ \xa0]","g");return e.replace(a,"$1\xa0$2").replace(n,"$1\xa0$2 ")}}),f.addRule({name:"ru/nbsp/centuries",handler:function(e){var t=f.getData("common/dash"),a="(^|\\s)([VIX]+)",n='(?=[,;:?!"\u2018\u201c\xbb]|$)',r=new RegExp(a+"[ \xa0]?\u0432\\.?"+n,"gm"),s=new RegExp(a+"("+t+")([VIX]+)[ \xa0]?\u0432\\.?([ \xa0]?\u0432\\.?)?"+n,"gm");return e.replace(r,"$1$2\xa0\u0432.").replace(s,"$1$2$3$4\xa0\u0432\u0432.")}}),f.addRule({name:"ru/nbsp/dayMonth",handler:function(e){var t=new RegExp("(\\d{1,2}) ("+f.getData("ru/shortMonth")+")","gi");return e.replace(t,"$1\xa0$2")}}),f.addRule({name:"ru/nbsp/groupNumbers",handler:function(e){var t=new RegExp("(^ ?|\\D |".concat(f._privateLabel,")(\\d{1,3}([ \xa0\u202f\u2009]\\d{3})+)(?! ?[\\d-])"),"gm");return e.replace(t,function(e,t,a){return t+a.replace(/\s/g,"\u202f")})}}),f.addRule({name:"ru/nbsp/initials",handler:function(e){var t=f.getData("ru/quote"),a=new RegExp("(^|[\xa0\u202f "+t.left+f._privateLabel+'"])([\u0410-\u042f\u0401])\\.[\xa0\u202f ]?([\u0410-\u042f\u0401])\\.[\xa0\u202f ]?([\u0410-\u042f\u0401][\u0430-\u044f\u0451]+)(?=[\\s.,;:?!"'+t.right+"]|$)","gm");return e.replace(a,"$1$2.\xa0$3.\xa0$4")}}),f.addRule({name:"ru/nbsp/m",index:"+5",handler:function(e){var t=f._privateLabel,a=new RegExp("(^|[\\s,."+t+"])(\\d+)[ \xa0]?(\u043c\u043c?|\u0441\u043c|\u043a\u043c|\u0434\u043c|\u0433\u043c|mm?|km|cm|dm)([23\xb2\xb3])?([\\s.!?,;"+t+"]|$)","gm");return e.replace(a,function(e,t,a,n,r,s){return t+a+"\xa0"+n+{2:"\xb2","\xb2":"\xb2",3:"\xb3","\xb3":"\xb3","":""}[r||""]+("\xa0"===s?" ":s)})}}),f.addRule({name:"ru/nbsp/mln",handler:function(e){return e.replace(/(\d) ?(\u0442\u044b\u0441|\u043c\u043b\u043d|\u043c\u043b\u0440\u0434|\u0442\u0440\u043b\u043d)(\.|\s|$)/gi,"$1\xa0$2$3")}}),f.addRule({name:"ru/nbsp/ooo",handler:function(e){return e.replace(/(^|[^a-\u044f\u0451A-\u042f\u0401])(\u041e\u041e\u041e|\u041e\u0410\u041e|\u0417\u0410\u041e|\u041d\u0418\u0418|\u041f\u0411\u041e\u042e\u041b) /g,"$1$2\xa0")}}),f.addRule({name:"ru/nbsp/page",handler:function(e){var t=new RegExp("(^|[)\\s"+f._privateLabel+"])(\u0441\u0442\u0440|\u0433\u043b|\u0440\u0438\u0441|\u0438\u043b\u043b?|\u0441\u0442|\u043f|c)\\. *(\\d+)([\\s.,?!;:]|$)","gim");return e.replace(t,"$1$2.\xa0$3$4")}}),f.addRule({name:"ru/nbsp/ps",handler:function(e){var t=new RegExp("(^|\\s|"+f._privateLabel+")[p\u0437]\\.[ \xa0]?([p\u0437]\\.[ \xa0]?)?[s\u044b]\\.:? ","gim");return e.replace(t,function(e,t,a){return t+(a?"P.\xa0P.\xa0S. ":"P.\xa0S. ")})}}),f.addRule({name:"ru/nbsp/rubleKopek",handler:function(e){return e.replace(/(\d) ?(?=(\u0440\u0443\u0431|\u043a\u043e\u043f)\.)/g,"$1\xa0")}}),f.addRule({name:"ru/nbsp/see",handler:function(e){var t=new RegExp("(^|\\s|"+f._privateLabel+"|\\()(\u0441\u043c|\u0438\u043c)\\.[ \xa0]?([\u0430-\u044f\u04510-9a-z]+)([\\s.,?!]|$)","gi");return e.replace(t,function(e,t,a,n,r){return("\xa0"===t?" ":t)+a+".\xa0"+n+r})}}),f.addRule({name:"ru/nbsp/year",handler:function(e){return e.replace(/(^|\D)(\d{4}) ?\u0433([ ,;.\n]|$)/g,"$1$2\xa0\u0433$3")}}),f.addRule({name:"ru/nbsp/years",index:"+5",handler:function(e){var t=f.getData("common/dash"),a=new RegExp("(^|\\D)(\\d{4})("+t+')(\\d{4})[ \xa0]?\u0433\\.?([ \xa0]?\u0433\\.)?(?=[,;:?!"\u2018\u201c\xbb\\s]|$)',"gm");return e.replace(a,"$1$2$3$4\xa0\u0433\u0433.")}}),f.addRule({name:"ru/number/comma",handler:function(e){return e.replace(/(^|\s)(\d+)\.(\d+[\u00A0\u2009\u202F ]*?[%\u2030\xb0\xd7x])/gim,"$1$2,$3")}}),f.addRule({name:"ru/number/ordinals",handler:function(e,t,a){var n=new RegExp("(\\d[%\u2030]?)-(\u044b\u0439|\u043e\u0439|\u0430\u044f|\u043e\u0435|\u044b\u0435|\u044b\u043c|\u043e\u043c|\u044b\u0445|\u043e\u0433\u043e|\u043e\u043c\u0443|\u044b\u043c\u0438)(?!["+a.getData("char")+"])","g");return e.replace(n,function(e,t,a){return t+"-"+{"\u043e\u0439":"\u0439","\u044b\u0439":"\u0439","\u0430\u044f":"\u044f","\u043e\u0435":"\u0435","\u044b\u0435":"\u0435","\u044b\u043c":"\u043c","\u043e\u043c":"\u043c","\u044b\u0445":"\u0445","\u043e\u0433\u043e":"\u0433\u043e","\u043e\u043c\u0443":"\u043c\u0443","\u044b\u043c\u0438":"\u043c\u0438"}[a]})}}),d=["typograf-oa-lbracket","typograf-oa-n-lbracket","typograf-oa-sp-lbracket"],p="ru/optalign/bracket",f.addRule({name:p,handler:function(e){return e.replace(/( |\u00A0)\(/g,'<span class="typograf-oa-sp-lbracket">$1</span><span class="typograf-oa-lbracket">(</span>').replace(/^\(/gm,'<span class="typograf-oa-n-lbracket">(</span>')},disabled:!0,htmlAttrs:!1}).addInnerRule({name:p,queue:"start",handler:function(e){return f._removeOptAlignTags(e,d)}}).addInnerRule({name:p,queue:"end",handler:function(e){return f._removeOptAlignTagsFromTitle(e,d)}}),g=["typograf-oa-comma","typograf-oa-comma-sp"],h="ru/optalign/comma",f.addRule({name:h,handler:function(e,t,a){var n=new RegExp("(["+a.getData("char")+"\\d\u0301]+), ","gi");return e.replace(n,'$1<span class="typograf-oa-comma">,</span><span class="typograf-oa-comma-sp"> </span>')},disabled:!0,htmlAttrs:!1}).addInnerRule({name:h,queue:"start",handler:function(e){return f._removeOptAlignTags(e,g)}}).addInnerRule({name:h,queue:"end",handler:function(e){return f._removeOptAlignTagsFromTitle(e,g)}}),f._removeOptAlignTags=function(e,t){var a=new RegExp('<span class="('+t.join("|")+')">([^]*?)</span>',"g");return e.replace(a,"$2")},f._removeOptAlignTagsFromTitle=function(e,t){return e.replace(/<title>[^]*?<\/title>/i,function(e){return f._removeOptAlignTags(e,t)})},m=["typograf-oa-lquote","typograf-oa-n-lquote","typograf-oa-sp-lquote"],v="ru/optalign/quote",f.addRule({name:v,handler:function(e){var t=this.getSetting("common/punctuation/quote","ru"),a="(["+t.left[0]+(t.left[1]||"")+"])",n=new RegExp("(^|\n\n|"+f._privateLabel+")("+a+")","g"),r=new RegExp("([^\n"+f._privateLabel+"])([ \xa0\n])("+a+")","gi");return e.replace(n,'$1<span class="typograf-oa-n-lquote">$2</span>').replace(r,'$1<span class="typograf-oa-sp-lquote">$2</span><span class="typograf-oa-lquote">$3</span>')},disabled:!0,htmlAttrs:!1}).addInnerRule({name:v,queue:"start",handler:function(e){return f._removeOptAlignTags(e,m)}}).addInnerRule({name:v,queue:"end",handler:function(e){return f._removeOptAlignTagsFromTitle(e,m)}}),f.addRule({name:"ru/other/accent",handler:function(e){return e.replace(/([\u0430-\u044f\u0451])([\u0410\u0415\u0401\u0418\u041e\u0423\u042b\u042d\u042e\u042f])([^\u0410-\u042f\u0401\w]|$)/g,function(e,t,a,n){return t+a.toLowerCase()+"\u0301"+n})},disabled:!0}),R=[],[4162,416332,8512,851111,4722,4725,391379,8442,4732,4152,4154451,4154459,4154455,41544513,8142,8332,8612,8622,3525,812,8342,8152,3812,4862,3422,342633,8112,9142,8452,3432,3434,3435,4812,8432,8439,3822,4872,3412,3511,3512,3022,4112,4852,4855,3852,3854,8182,818,90,3472,4741,4764,4832,4922,8172,8202,8722,4932,493,3952,3951,3953,411533,4842,3842,3843,8212,4942,"39131-39179","39190-39199",391,4712,4742,8362,495,499,4966,4964,4967,498,8312,8313,3832,383612,3532,8412,4232,423370,423630,8632,8642,8482,4242,8672,8652,4752,4822,482502,4826300,3452,8422,4212,3466,3462,8712,8352,"901-934","936-939","950-953",958,"960-969","977-989","991-997",999].forEach(function(e){if("string"==typeof e)for(var t=e.split("-"),a=+t[0];a<=+t[1];a++)R.push(a);else R.push(e)}),f.addRule({name:"ru/other/phone-number",live:!1,handler:function(e){var t=f._privateLabel,a=new RegExp("(^|,| |"+t+")(\\+7[\\d\\(\\) \xa0-]{10,18})(?=,|;|"+t+"|$)","gm");return e.replace(a,function(e,t,a){var n=E(a);return 12===n.length?t+x(n):e}).replace(/(^|[^\u0430-\u044f\u0451])([\u260e\u260f\u2706\ud83d\udce0\ud83d\udcde\ud83d\udcf1]|\u0442\.|\u0442\u0435\u043b\.|\u0444\.|\u043c\u043e\u0431\.|\u0444\u0430\u043a\u0441|\u0441\u043e\u0442\u043e\u0432\u044b\u0439|\u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439|\u0442\u0435\u043b\u0435\u0444\u043e\u043d)(:?\s*?)([+\d(][\d \u00A0\-()]{3,}\d)/gi,function(e,t,a,n,r){var s=E(r);return 5<=s.length?t+a+n+x(s):e})}}),f.addRule({name:"ru/punctuation/ano",handler:function(e){var t=new RegExp("([^!?,:;\\-\u2012\u2013\u2014\\s])(\\s+)(\u0430|\u043d\u043e)(?= |\xa0|\\n)","g");return e.replace(t,"$1,$2$3")},queue:"hide-safe-tags-html"}),f.addRule({name:"ru/punctuation/exclamation",live:!1,handler:function(e){return e.replace(/(^|[^!])!{2}($|[^!])/gm,"$1!$2").replace(/(^|[^!])!{4}($|[^!])/gm,"$1!!!$2")}}),f.addRule({name:"ru/punctuation/exclamationQuestion",index:"+5",handler:function(e){var t=new RegExp("(^|[^!])!\\?([^?]|$)","g");return e.replace(t,"$1?!$2")}}),f.addRule({name:"ru/punctuation/hellipQuestion",handler:function(e){return e.replace(/(^|[^.])(\.\.\.|\u2026),/g,"$1\u2026").replace(/(!|\?)(\.\.\.|\u2026)(?=[^.]|$)/g,"$1..")}}),f.addRule({name:"ru/space/afterHellip",handler:function(e){return e.replace(/([\u0430-\u044f\u0451])(\.\.\.|\u2026)([\u0410-\u042f\u0401])/g,"$1$2 $3").replace(/([?!]\.\.)([\u0430-\u044f\u0451a-z])/gi,"$1 $2")}}),f.addRule({name:"ru/space/year",handler:function(e,t,a){var n=new RegExp("(^| |\xa0)(\\d{3,4})(\u0433\u043e\u0434([\u0430\u0443\u0435]|\u043e\u043c)?)([^"+a.getData("char")+"]|$)","g");return e.replace(n,"$1$2 $3$5")}}),f.addRule({name:"ru/symbols/NN",handler:function(e){return e.replace(/\u2116\u2116/g,"\u2116")}}),$={A:"\u0410",a:"\u0430",B:"\u0412",E:"\u0415",e:"\u0435",K:"\u041a",M:"\u041c",H:"\u041d",O:"\u041e",o:"\u043e",P:"\u0420",p:"\u0440",C:"\u0421",c:"\u0441",T:"\u0422",y:"\u0443",X:"\u0425",x:"\u0445"},b=Object.keys($).join(""),f.addRule({name:"ru/typo/switchingKeyboardLayout",handler:function(e){var t=new RegExp("(["+b+"]{1,3})(?=[\u0410-\u042f\u0401\u0430-\u044f\u0451]+?)","g");return e.replace(t,function(e,t){for(var a="",n=0;n<t.length;n++)a+=$[t[n]];return a})}}),f.addRule({name:"en-US/dash/main",index:"-5",handler:function(e){var t=f.getData("common/dash"),a="[ ".concat("\xa0","]"),n="[ ".concat("\xa0","\n]"),r=new RegExp("".concat(a,"(").concat(t,")(").concat(n,")"),"g");return e.replace(r,"".concat("\xa0").concat("\u2014","$2"))}}),f});